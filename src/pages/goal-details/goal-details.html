<ion-header>

  <ion-navbar>
    <ion-title>Goal Details</ion-title>

  </ion-navbar>

</ion-header>


<ion-content padding>

  <ion-card>
    <ion-card-header>
      <h1>{{goal.title}}</h1>
    </ion-card-header>

    <ion-card-content>
      <!--This will contain the d3 graph of the users datapoints-->
      <ion-img width="300" height="200" src={{goal.graph_url}}> </ion-img>
    </ion-card-content>
  </ion-card>

  <ion-card>

    <ion-card-header>
      <h1>Settings</h1>
    </ion-card-header>

    <ion-list>
      <ion-item>
        <span item-left>Target Goal Value</span>
        <span item-right>{{goal.goalval  | number:0}} </span>
      </ion-item>
      <ion-item>
        <span item-left>Rate</span>
        <span item-right>{{goal.rate  | number:0}} </span>
      </ion-item>
      <ion-item>
        <span item-left>Current Value</span>
        <span item-right>{{goal.curval  | number:0}}</span>
      </ion-item>
      <ion-item>
        <span item-left>Updated</span>
        <span item-right> {{goal.updated_at  | date:'M/d/yyyy HH:mm:ss'}}</span>
      </ion-item>
      <ion-item>
        <span item-left>Amount Pledged</span>
        <span item-right>{{goal.pledge}}</span>
      </ion-item>
      <ion-item>
        <span item-left>Goal End Date:</span>
        <span item-right>{{goal.goaldate  | date:'M/d/yyyy HH:mm:ss'}}</span>
      </ion-item>
    </ion-list>

    <button ion-button round block (click)="editSettingsTapped($event)">Edit Settings</button>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <h1>Add Datapoint</h1>
    </ion-card-header>

    <form (ngSubmit)="addDataPoint()">
      <ion-item>
        <ion-label floating>Value</ion-label>
        <ion-input type="number" [(ngModel)]="datapoint.value" name="value" value="{{datapoints[0]?.value | number:0}}"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>Comment</ion-label>
        <ion-input type="text" [(ngModel)]="datapoint.comment" name="comment" value="{{datapoints[0]?.comment}}" required></ion-input>
      </ion-item>

      <ion-row>
        <ion-col width-50 style="text-align: right">
          <button type="submit" ion-button>Submit DataPoint</button>
        </ion-col>
      </ion-row>

    </form>
  </ion-card>


  <ion-card>

    <ion-card-header>
      <h1>Datapoints</h1>
    </ion-card-header>

    <ion-list>
      <ion-item>
        <span item-left>Value</span>
        <span item-right>Updated</span>
      </ion-item>

      <ion-item *ngFor="let datapoint of datapoints">
        <span>{{datapoint.value  |  number:0}}</span>
        <span item-right style="font-style: italic">{{datapoint.timestamp*1000  |  date:'M/d/yyyy HH:mm:ss'}} </span>
      </ion-item>
    </ion-list>

  </ion-card>

</ion-content>